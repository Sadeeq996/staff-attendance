<ion-header>
    <ion-toolbar>
        <ion-title>Shift Records</ion-title>
    </ion-toolbar>
    <ion-toolbar>
        <ion-segment value="daily" (ionChange)="onPeriodChange($event)">
            <ion-segment-button value="daily"><ion-label>Daily</ion-label></ion-segment-button>
            <ion-segment-button value="weekly"><ion-label>Weekly</ion-label></ion-segment-button>
            <ion-segment-button value="monthly"><ion-label>Monthly</ion-label></ion-segment-button>
        </ion-segment>
    </ion-toolbar>
    <ion-toolbar>
        <ion-datetime displayFormat="yyyy-MM-dd" [(ngModel)]="dateIso"
            (ionChange)="onDateChange($event)"></ion-datetime>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <div *ngIf="loading">Loadingâ€¦</div>
    <ion-note *ngIf="!loading && assignments.length===0">No assignments for selected period.</ion-note>

    <!-- Grouped by shift type -->
    <div *ngFor="let group of groupedShifts" style="margin-bottom: 24px;">
        <div style="display: flex; align-items: center; margin-bottom: 12px; gap: 8px;">
            <h3 style="margin: 0; flex: 1; text-transform: capitalize;">{{ group.shift }}</h3>
            <ion-chip>{{ group.count }} staff</ion-chip>
        </div>

        <ion-list>
            <ion-item *ngFor="let staff of group.staff">
                <div style="flex:1">
                    <div><strong>{{ staff.userFullName }}</strong></div>
                    <div><small>{{ staff.date }}</small></div>
                </div>
            </ion-item>
        </ion-list>
    </div>
</ion-content>